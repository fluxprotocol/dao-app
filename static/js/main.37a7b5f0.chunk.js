(this["webpackJsonpdao-app"]=this["webpackJsonpdao-app"]||[]).push([[0],{119:function(e,t,n){e.exports={paper:"Dialog_paper__XrzDE",cancelButton:"Dialog_cancelButton__3SRaV",confirmButton:"Dialog_confirmButton__OGdmB"}},198:function(e){e.exports=JSON.parse('{"global.appName":"Flux DAO","global.action.cancel":"Cancel","global.action.submit":"Submit","home.title":"Proposals","menu.loggedInAs":"Hello :accountId","menu.logout":"Logout","menu.item.home":"Home","menu.item.council":"Council","council.title":"Council","resoluteMarketForm.input.validMarket":"Valid","resoluteMarketForm.input.invalidMarket":"Invalid","resoluteMarketForm.input.marketId":"Market id","resoluteMarketForm.input.payoutNumerator":"Payout numerator","resoluteMarketForm.input.payoutNumeratorHelper":"Seperate percentages with a space example: 50 0 50","newCouncilForm.input.accountId":"Account id","newCouncilForm.input.description":"Description of proposal","addTokenWhitelist.input.accountId":"Token address id","addTokenWhitelist.input.description":"Description of proposal","proposalInfo.label.status":"Status: :status","proposalInfo.label.creator":"Creator: :creator","proposalInfo.label.votePeriodEnd":"Vote period end: :date","proposalInfo.action.voteYes":"Yes (:amount)","proposalInfo.action.voteNo":"No (:amount)","proposalInfo.action.finalize":"Finalize","proposalsOverview.create":"Create proposal","proposal.resoluteMarket.description":"Resolute market: :description","proposalDialog.title":"Create a proposal","proposalDialog.types.newCouncil":"New council","proposalDialog.types.addTokenWhitelist":"Add token to the whitelist","proposalDialog.types.resoluteMarket":"Resolute market"}')},199:function(e,t,n){e.exports={button:"Button_button__2Lf63"}},200:function(e,t,n){e.exports={root:"OptionSwitch_root__URwjr"}},226:function(e,t){},231:function(e,t){},254:function(e,t){},256:function(e,t){},310:function(e,t,n){},311:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(19),o=n.n(a),c=n(91),i=n(47),u=n(365),s=n(10),l=n(21),p=n(4);function d(e){var t=e.council;return Object(p.jsx)("section",{children:t.map((function(e){return Object(p.jsx)("div",{children:e},e)}))})}var b,j,f=n(8),v=n.n(f),h=n(14),O=n(195),k=n(196),x=n(39),m=n.n(x),g=n(76),y="null_contract.flux-dev",w=new m.a("300000000000000"),C=new m.a("30000000000000000000000");function _(e,t){return{networkId:"testnet",nodeUrl:t||"https://rpc.testnet.near.org",contractName:null,walletUrl:"https://wallet.testnet.near.org",initialBalance:"100000000"}}function I(){return M.apply(this,arguments)}function M(){return(M=Object(h.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b){e.next=2;break}return e.abrupt("return",b);case 2:return t=_(),e.next=5,Object(g.connect)(Object(s.a)(Object(s.a)({},t),{},{deps:{keyStore:new g.keyStores.BrowserLocalStorageKeyStore}}));case 5:return b=e.sent,e.abrupt("return",b);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return T.apply(this,arguments)}function T(){return(T=Object(h.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=2;break}return e.abrupt("return",j);case 2:return e.next=4,I();case 4:return t=e.sent,j=new g.WalletConnection(t,y),e.abrupt("return",j);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S,P=function(){function e(t){Object(O.a)(this,e),this.contract=void 0,this.contract=new g.Contract(t,"beta_dao.flux-dev",{viewMethods:["get_council","get_bond","get_proposals"],changeMethods:["add_proposal","vote","finalize"]})}return Object(k.a)(e,[{key:"getCouncil",value:function(){var e=Object(h.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.get_council({a:1});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getBond",value:function(){var e=Object(h.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.contract.get_bond({a:1});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getProposals",value:function(){var e=Object(h.a)(v.a.mark((function e(){var t,n,r,a=arguments;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:"0",n=a.length>1&&void 0!==a[1]?a[1]:"1000",e.next=4,this.contract.get_proposals({from_index:t,limit:n});case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createResoluteMarketProposal",value:function(){var e=Object(h.a)(v.a.mark((function e(t,n,r){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.contract.add_proposal({proposal:{description:t,kind:{market_id:n,payout_numerator:r,type:"ResoluteMarket"}}},w,C);case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"createNewCouncilProposal",value:function(){var e=Object(h.a)(v.a.mark((function e(t,n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.contract.add_proposal({proposal:{description:t,kind:{target:n,type:"NewCouncil"}}},w,C);case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createAddTokenToWhitelistProposal",value:function(){var e=Object(h.a)(v.a.mark((function e(t,n){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.contract.add_proposal({proposal:{description:t,kind:{to_add:n,type:"AddTokenWhitelist"}}},w,C);case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"vote",value:function(e,t){this.contract.vote({id:e,vote:t},w,new m.a(0))}},{key:"finalize",value:function(e){this.contract.finalize({id:e},w,new m.a(0))}}]),e}();function A(){return R.apply(this,arguments)}function R(){return(R=Object(h.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S){e.next=2;break}return e.abrupt("return",S);case 2:return e.next=4,N();case 4:return t=e.sent,S=new P(t.account()),e.abrupt("return",S);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E=n(60),D=Object(E.a)({initialState:{council:[],loading:!1,errors:[]},name:"council",reducers:{setCouncil:function(e,t){return Object(s.a)(Object(s.a)({},e),{},{council:t.payload})},setCouncilLoading:function(e,t){return Object(s.a)(Object(s.a)({},e),{},{loading:t.payload})},setCouncilErrors:function(e,t){return Object(s.a)(Object(s.a)({},e),{},{errors:t.payload})}}}),F=D.actions,W=F.setCouncil,L=F.setCouncilErrors,B=F.setCouncilLoading,z=D.reducer;function q(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.council.council}));return Object(r.useEffect)((function(){e(function(){var e=Object(h.a)(v.a.mark((function e(t){var n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(B(!0)),e.next=4,A();case 4:return n=e.sent,e.next=7,n.getCouncil();case 7:r=e.sent,t(W(r)),t(B(!1)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),t(L(e.t0)),t(B(!1));case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(p.jsx)(d,{council:t})}var U=n(90),H=n(197),V=n.n(H);function Y(){return Object(p.jsx)("footer",{})}var K=n(198);function J(e,t,n){var r=K[e];if(!r)return console.info("Transaltion not found for",e),e;var a,o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.replace(/:(\w+)/gi,(function(e){var n=e.replace(/^:/,"");return void 0===t[n]||null===t[n]?"":t[n]}))}(r,t);return n?(a=o).charAt(0).toUpperCase()+a.substring(1):o}function X(e){var t=e.onLoginClick,n=e.onLogoutClick,r=e.account;return Object(p.jsxs)("section",{children:[!r&&Object(p.jsx)("button",{onClick:t,children:J("menu.login")}),r&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{children:J("menu.loggedInAs",{accountId:r.accountId})}),Object(p.jsx)("button",{onClick:n,children:J("menu.logout")})]}),Object(p.jsx)(c.b,{to:ft.root(),children:J("menu.item.home")}),Object(p.jsx)(c.b,{to:ft.council(),children:J("menu.item.council")})]})}var G=Object(E.a)({initialState:{account:null,loading:!1,errors:[]},name:"account",reducers:{setAccount:function(e,t){return Object(s.a)(Object(s.a)({},e),{},{account:t.payload})},setAccountLoading:function(e,t){return Object(s.a)(Object(s.a)({},e),{},{loading:t.payload})},setAccountErrors:function(e,t){return Object(s.a)(Object(s.a)({},e),{},{errors:t.payload})}}}),Q=G.actions,Z=Q.setAccount,$=(Q.setAccountErrors,Q.setAccountLoading),ee=G.reducer;function te(){return ne.apply(this,arguments)}function ne(){return(ne=Object(h.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:e.sent.requestSignIn(y,J("global.appName"));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(){return ae.apply(this,arguments)}function ae(){return(ae=Object(h.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:if((t=e.sent).isSignedIn()){e.next=5;break}return e.abrupt("return",null);case 5:return n=t.account(),e.t0=n.accountId,e.next=9,n.getAccountBalance();case 9:return e.t1=e.sent.available,e.abrupt("return",{accountId:e.t0,balance:e.t1});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(){return ce.apply(this,arguments)}function ce(){return(ce=Object(h.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:e.sent.signOut();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ie=Object(E.a)({initialState:{loading:!1,errors:[]},name:"daoInfo",reducers:{setDaoInfo:function(e,t){return Object(s.a)(Object(s.a)({},e),{},{daoInfo:t.payload})},setDaoLoading:function(e,t){return Object(s.a)(Object(s.a)({},e),{},{loading:t.payload})},setDaoErrors:function(e,t){return Object(s.a)(Object(s.a)({},e),{},{errors:t.payload})}}}),ue=ie.actions,se=ue.setDaoErrors,le=ue.setDaoInfo,pe=ue.setDaoLoading,de=ie.reducer;function be(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.account.account}));Object(r.useEffect)((function(){t||e(function(){var e=Object(h.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t($(!0)),e.next=4,re();case 4:n=e.sent,t(Z(n)),t($(!1)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),t($(!1)),console.error("[getAccount]",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(h.a)(v.a.mark((function e(t){var n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(pe(!0)),e.next=4,A();case 4:return n=e.sent,e.next=7,n.getBond();case 7:r=e.sent,t(le({bond:r})),t(pe(!1)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),t(se(e.t0)),t(pe(!1));case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}())}),[e,t]);var n=Object(r.useCallback)((function(){e(function(){var e=Object(h.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t($(!0)),e.next=4,te();case 4:t($(!1)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),t($(!1)),console.error("[signIn]",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())}),[]),a=Object(r.useCallback)((function(){e(function(){var e=Object(h.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe();case 2:t(Z(null));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]);return Object(p.jsx)(X,{onLoginClick:n,onLogoutClick:a,account:t})}var je=n(96),fe=n.n(je);function ve(e){var t,n=e.children,r=e.hasNavigation,a=void 0===r||r,o=e.hasFooter,c=void 0===o||o,i=e.size,u=void 0===i?"medium":i,s=e.className,l=void 0===s?"":s,d=e.bodyClassName,b=void 0===d?"":d,j=V()(fe.a.page__body,b,(t={},Object(U.a)(t,fe.a["page__body--large"],"large"===u),Object(U.a)(t,fe.a["page__body--unrestricted"],"unrestricted"===u),t));return Object(p.jsxs)("div",{className:"".concat(fe.a.page," ").concat(l),children:[a&&Object(p.jsx)(be,{}),Object(p.jsx)("main",{className:j,children:n}),c&&Object(p.jsx)(Y,{})]})}var he=n(118),Oe=n(366),ke=n(371),xe=n(369),me=n(356),ge=n(357),ye=n(358),we=n(206),Ce=n(352),_e=n(199),Ie=n.n(_e);function Me(e){var t=e.className,n=void 0===t?"":t,r=e.children,a=Object(we.a)(e,["className","children"]);return Object(p.jsx)(Ce.a,Object(s.a)(Object(s.a)({},a),{},{className:"".concat(Ie.a.button," ").concat(n),children:r}))}var Ne=n(119),Te=n.n(Ne);function Se(e){var t=e.title,n=e.children,r=e.open,a=e.onRequestClose,o=e.onSubmitClick;return Object(p.jsxs)(xe.a,{open:r,classes:{paper:Te.a.paper},children:[Object(p.jsx)(me.a,{children:t}),Object(p.jsx)(ge.a,{children:n}),Object(p.jsxs)(ye.a,{children:[Object(p.jsx)(Me,{className:Te.a.cancelButton,onClick:a,children:J("global.action.cancel")}),Object(p.jsx)(Me,{className:Te.a.confirmButton,onClick:o,children:J("global.action.submit")})]})]})}var Pe,Ae,Re=n(368),Ee=n(370),De=n(200),Fe=n.n(De);function We(e){var t=e.labelA,n=e.labelB,r=e.onChange,a=e.value;return Object(p.jsxs)("span",{className:Fe.a.root,children:[Object(p.jsx)("span",{children:t}),Object(p.jsx)(Ee.a,{value:a,onChange:function(e,t){return r(t)}}),Object(p.jsx)("span",{children:n})]})}function Le(e){var t=e.onChange,n=e.values,r=e.markets;var a=r.find((function(e){return e.id===n.marketId}));return Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{children:Object(p.jsx)(Oe.a,{label:J("resoluteMarketForm.input.marketId"),value:n.marketId,onChange:function(e){var a=r.find((function(t){return t.id===e.target.value}));t(Object(s.a)(Object(s.a)({},n),{},{marketId:(null===a||void 0===a?void 0:a.id)||"",marketDescription:(null===a||void 0===a?void 0:a.description)||""}))},children:r.map((function(e){return Object(p.jsxs)(ke.a,{value:e.id,children:[e.id," - ",e.description]},e.id)}))})}),Object(p.jsxs)("div",{children:[Object(p.jsx)("br",{}),null===a||void 0===a?void 0:a.extraInfo]}),Object(p.jsx)(We,{labelA:J("resoluteMarketForm.input.validMarket"),labelB:J("resoluteMarketForm.input.invalidMarket"),value:n.isInvalidMarket,onChange:function(e){t(Object(s.a)(Object(s.a)({},n),{},{isInvalidMarket:e}))}}),Object(p.jsx)("div",{children:!n.isInvalidMarket&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{children:null===a||void 0===a?void 0:a.outcomeTags.map((function(e,t){return Object(p.jsxs)("div",{children:[Object(p.jsx)("span",{children:t}),Object(p.jsx)("span",{children:e})]},t)}))}),Object(p.jsx)(Re.a,{helperText:J("resoluteMarketForm.input.payoutNumeratorHelper"),label:J("resoluteMarketForm.input.payoutNumerator"),onChange:function(e){t(Object(s.a)(Object(s.a)({},n),{},{payoutNumerator:e.currentTarget.value}))},value:n.payoutNumerator})]})})]})}function Be(e){var t=e.onChange,n=e.values;return Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{children:Object(p.jsx)(Re.a,{label:J("newCouncilForm.input.accountId"),onChange:function(e){t(Object(s.a)(Object(s.a)({},n),{},{accountId:e.currentTarget.value}))},value:n.accountId})}),Object(p.jsx)("div",{children:Object(p.jsx)(Re.a,{label:J("newCouncilForm.input.description"),onChange:function(e){t(Object(s.a)(Object(s.a)({},n),{},{description:e.currentTarget.value}))},value:n.description})})]})}function ze(e){var t=e.onChange,n=e.values;return Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{children:Object(p.jsx)(Re.a,{label:J("addTokenWhitelist.input.accountId"),onChange:function(e){t(Object(s.a)(Object(s.a)({},n),{},{accountId:e.currentTarget.value}))},value:n.accountId})}),Object(p.jsx)("div",{children:Object(p.jsx)(Re.a,{label:J("addTokenWhitelist.input.description"),onChange:function(e){t(Object(s.a)(Object(s.a)({},n),{},{description:e.currentTarget.value}))},value:n.description})})]})}function qe(e){var t=e.open,n=e.markets,a=e.onRequestClose,o=e.onSubmit,c=Object(r.useState)({newCouncil:{accountId:"",description:""},addTokenWhitelist:{accountId:"",description:""},resoluteMarket:{isInvalidMarket:!1,marketId:"",marketDescription:"",payoutNumerator:""},type:Pe.ResoluteMarket}),i=Object(he.a)(c,2),u=i[0],l=i[1];return Object(p.jsxs)(Se,{open:t,title:J("proposalDialog.title"),onSubmitClick:function(){return o(u)},onRequestClose:a,children:[Object(p.jsxs)(Oe.a,{value:u.type,onChange:function(e){l(Object(s.a)(Object(s.a)({},u),{},{type:e.target.value}))},children:[Object(p.jsx)(ke.a,{value:Pe.ResoluteMarket,children:J("proposalDialog.types.resoluteMarket")}),Object(p.jsx)(ke.a,{value:Pe.NewCouncil,children:J("proposalDialog.types.newCouncil")}),Object(p.jsx)(ke.a,{value:Pe.AddTokenWhitelist,children:J("proposalDialog.types.addTokenWhitelist")})]}),u.type===Pe.ResoluteMarket&&Object(p.jsx)(Le,{markets:n,values:u.resoluteMarket,onChange:function(e){l(Object(s.a)(Object(s.a)({},u),{},{resoluteMarket:e}))}}),u.type===Pe.NewCouncil&&Object(p.jsx)(Be,{values:u.newCouncil,onChange:function(e){l(Object(s.a)(Object(s.a)({},u),{},{newCouncil:e}))}}),u.type===Pe.AddTokenWhitelist&&Object(p.jsx)(ze,{values:u.addTokenWhitelist,onChange:function(e){l(Object(s.a)(Object(s.a)({},u),{},{addTokenWhitelist:e}))}})]})}!function(e){e.ResoluteMarket="ResoluteMarket",e.NewCouncil="NewCouncil",e.AddTokenWhitelist="AddTokenWhitelist"}(Pe||(Pe={})),function(e){e.Vote="Vote",e.Success="Success",e.Reject="Reject",e.Finalized="Finalized",e.Rejected="Rejected"}(Ae||(Ae={}));var Ue=n(361),He=n(362),Ve=n(364),Ye=n(363),Ke=n(314);function Je(e){var t=e.proposal,n=e.onNoClick,r=e.onYesClick,a=e.onFinalizeClick,o=new Date(t.vote_period_end/1e6);return Object(p.jsxs)(Ue.a,{children:[Object(p.jsx)(He.a,{onClick:function(){t.kind.type===Pe.ResoluteMarket&&window.open("".concat("https://fluxprotocol.github.io/beta/#/beta/markets/").concat(t.kind.market_id),"_blank")},children:Object(p.jsxs)(Ye.a,{children:[Object(p.jsx)(Ke.a,{gutterBottom:!0,variant:"h5",component:"h2",children:t.description}),Object(p.jsx)("pre",{children:JSON.stringify(t.kind,null,4)}),Object(p.jsx)(Ke.a,{gutterBottom:!0,variant:"body1",component:"p",children:J("proposalInfo.label.status",{status:t.status})}),Object(p.jsx)(Ke.a,{gutterBottom:!0,variant:"body1",component:"p",children:J("proposalInfo.label.creator",{creator:t.proposer})}),Object(p.jsx)(Ke.a,{gutterBottom:!0,variant:"body1",component:"p",children:J("proposalInfo.label.votePeriodEnd",{date:o.toString()})})]})}),Object(p.jsxs)(Ve.a,{children:[t.status===Ae.Vote&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Me,{onClick:r,children:J("proposalInfo.action.voteYes",{amount:t.vote_yes.toString()})}),Object(p.jsx)(Me,{onClick:n,children:J("proposalInfo.action.voteNo",{amount:t.vote_no.toString()})})]}),t.status===Ae.Success&&Object(p.jsx)(Me,{onClick:a,children:J("proposalInfo.action.finalize")})]})]})}function Xe(e){var t=e.onProposalSubmit,n=e.onNoClick,a=e.onYesClick,o=e.onFinalizeClick,c=e.proposals,i=e.markets,u=Object(r.useState)(!1),s=Object(he.a)(u,2),l=s[0],d=s[1];return Object(p.jsxs)("section",{children:[Object(p.jsx)("button",{onClick:function(){d(!0)},children:J("proposalsOverview.create")}),c.map((function(e,t){return Object(p.jsx)(Je,{proposal:e,onNoClick:function(){return n(e,t)},onYesClick:function(){return a(e,t)},onFinalizeClick:function(){return o(e,t)}},t)})),Object(p.jsx)(qe,{markets:i,open:l,onRequestClose:function(){return d(!1)},onSubmit:t})]})}var Ge=n(201),Qe=n(82);function Ze(e){return{id:e.id,description:e.description,outcomeTags:e.outcome_tags,extraInfo:e.extra_info}}var $e,et=new Qe.InMemoryCache,tt=Object(Qe.createHttpLink)({uri:"https://api.flux.xyz/graphql"}),nt=new Qe.ApolloClient({cache:et,link:tt,defaultOptions:{watchQuery:{fetchPolicy:"cache-and-network"}}});function rt(){return at.apply(this,arguments)}function at(){return(at=Object(h.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,nt.query({query:Object(Qe.gql)($e||($e=Object(Ge.a)(["\n                query ExiredMarkets {\n                    markets: getMarkets(filters: { expired: true, finalized: false }) {\n                        items {\n                            id\n                            description\n                            outcome_tags\n                            extra_info\n                        }\n                    }\n                }\n            "])))});case 3:return t=e.sent,n=t.data.markets.items,e.abrupt("return",n.map((function(e){return Ze(e)})));case 8:return e.prev=8,e.t0=e.catch(0),console.error("[getExpiredMarkets]",e.t0),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var ot=n(204),ct=n.n(ot);function it(e){var t=new ct.a(10).pow(18);return e.map((function(e){return t.mul(e/100).toFixed(0)}))}var ut=Object(E.a)({initialState:{proposals:[],expiredMarkets:[],loading:!1,errors:[]},name:"proposals",reducers:{setProposals:function(e,t){return Object(s.a)(Object(s.a)({},e),{},{proposals:t.payload})},setProposalsLoading:function(e,t){return Object(s.a)(Object(s.a)({},e),{},{loading:t.payload})},setProposalsErrors:function(e,t){return Object(s.a)(Object(s.a)({},e),{},{errors:t.payload})},setProposalsExpiredMarkets:function(e,t){return Object(s.a)(Object(s.a)({},e),{},{expiredMarkets:t.payload})}}}),st=ut.actions,lt=st.setProposals,pt=st.setProposalsLoading,dt=(st.setProposalsErrors,st.setProposalsExpiredMarkets),bt=ut.reducer;function jt(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.proposals.proposals})),n=Object(i.c)((function(e){return e.proposals.expiredMarkets}));return Object(r.useEffect)((function(){e(function(){var e=Object(h.a)(v.a.mark((function e(t){var n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:return n=e.sent,t(pt(!0)),e.next=6,n.getProposals();case 6:r=e.sent,t(lt(r)),t(pt(!1));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(h.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt();case 2:n=e.sent,t(dt(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(p.jsx)(Xe,{onProposalSubmit:function(t){e(function(e){return function(){var t=Object(h.a)(v.a.mark((function t(n){var r,a,o;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A();case 2:r=t.sent,e.type===Pe.ResoluteMarket?(n=e.resoluteMarket.payoutNumerator,a=n.split(" ").map((function(e){return Number(e.trim())})),o=it(a),r.createResoluteMarketProposal(J("proposal.resoluteMarket.description",{description:e.resoluteMarket.marketDescription}),e.resoluteMarket.marketId,e.resoluteMarket.isInvalidMarket?void 0:o)):e.type===Pe.NewCouncil?r.createNewCouncilProposal(e.newCouncil.description,e.newCouncil.accountId):e.type===Pe.AddTokenWhitelist&&r.createAddTokenToWhitelistProposal(e.addTokenWhitelist.description,e.addTokenWhitelist.accountId);case 4:case"end":return t.stop()}var n}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},proposals:t,markets:n,onYesClick:function(t,n){var r;e((r=n.toString(),function(){var e=Object(h.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:e.sent.vote(r,"Yes");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},onNoClick:function(t,n){var r;e((r=n.toString(),function(){var e=Object(h.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:e.sent.vote(r,"No");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},onFinalizeClick:function(t,n){var r;e((r=n.toString(),function(){var e=Object(h.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:e.sent.finalize(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}})}var ft={root:function(){return"/"},council:function(){return"/council"}},vt=[{component:function(){return Object(p.jsxs)(ve,{children:[Object(p.jsx)("h1",{children:J("home.title")}),Object(p.jsx)(jt,{})]})},exact:!0,inNavigation:!1,key:"home",label:"Home",path:ft.root()},{component:function(){return Object(p.jsxs)(ve,{children:[Object(p.jsx)("h1",{children:J("council.title")}),Object(p.jsx)(q,{})]})},exact:!0,inNavigation:!1,key:"council",label:"Council",path:ft.council()}];function ht(){return Object(p.jsx)(l.c,{children:vt.map((function(e){return Object(r.createElement)(l.a,Object(s.a)(Object(s.a)({},e),{},{key:e.key}))}))})}n(310);var Ot=n(26),kt=n(205),xt=n(77),mt=Object(Ot.combineReducers)({account:ee,council:z,proposals:bt,dao:de}),gt=function(){return"production"!==Object({NODE_ENV:"production",PUBLIC_URL:"https://fluxprotocol.github.io/dao-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://api.flux.xyz/graphql",REACT_APP_DAO_ACCOUNT_ID:"beta_dao.flux-dev",REACT_APP_FLUX_MARKET_DETAIL_URL:"https://fluxprotocol.github.io/beta/#/beta/markets/"}).REACT_APP_APP_ENV?Object(kt.composeWithDevTools)(Object(Ot.applyMiddleware)(xt.a)):Object(Ot.applyMiddleware)(xt.a)};var yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=gt();return Object(Ot.createStore)(mt,e,t)}({});o.a.render(Object(p.jsx)(i.a,{store:yt,children:Object(p.jsx)(c.a,{children:Object(p.jsx)(u.b,{injectFirst:!0,children:Object(p.jsx)(ht,{})})})}),document.getElementById("root"))},96:function(e,t,n){e.exports={page:"Page_page__1vav1",page__body:"Page_page__body__3V8v2","page__body--large":"Page_page__body--large__27pTP","page__body--unrestricted":"Page_page__body--unrestricted__3wRih"}}},[[311,1,2]]]);
//# sourceMappingURL=main.37a7b5f0.chunk.js.map